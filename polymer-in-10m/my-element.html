<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<polymer-element name="my-element" attributes="USD">
	<template>
		<span>BTC to USD converter: </span>
		<core-ajax id="ajax" url="https://api.bitcoinaverage.com/ticker/global/USD/" auto response="{{resp}}" handleAs="json"></core-ajax>
    	<paper-input id="btcInput" label="BTC" committedValue="{{BTC}}" floatinglabel>{{BTC}}</paper-input>
    	<div>{{BTC}}BTC = ${{_USD}}</div>
	</template>
	<script>
	    Polymer({
	    	publish: {
	    		USD: {
	    			reflect: true,
	    			value: 0
	    		}
	    	},
	    	BTC: 0,
	    	resp: {last: 0},
	    	get _USD(){
	    		var usd = this.resp.last*this.BTC;
	    		this.USD = usd;
	    		return usd;
	    	},
	    	domReady: function(){
	    		var $ = document.querySelector;
	    	},
	    });
	</script>
</polymer-element>

<!-- 

	note: we can concat a bunch of declarations together into a single importable html file 

-->
<polymer-element name="another-element" attributes="text">
	<template>
		<span>testing two-way binding {{text}}</span>
	</template>
	<script>
	    Polymer({});
	</script>

</polymer-element>

<polymer-element name="app-element">
	<template>
		<my-element id="converter" USD={{USD}}></my-element>
		<another-element text={{USD}}></another-element>
	</template>
	<script>
	    Polymer({});
	</script>
</polymer-element>

